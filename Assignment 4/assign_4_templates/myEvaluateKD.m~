function [accuracy] = myEvaluateKD(pathToAudio, pathToGT)

%% Evaluates the tuning frequency estimation algorithm
% Input:
%   pathToAudio:    string, path to audio files
%   pathToGT:       string, path to ground truth text files
% Output:
%   avgDeviation:   accuracy of key detection algorithm for the audio files
%                   in the audio directory

%% Please write your code here

blockSize = 4096;
hopSize = 2048;

audioFIles = dir(strcat(pathToAudio,'*.au'));
gtFiles = dir(strcat(pathToGT,'*.txt'));
numCorrectTrue = 0;
numCorrectFalse = 0;
major = char('A','A#','B','C','C#','D','D#','E','F','F#','G','G#');
minor = char('a','a#','b','c','c#','d','d#','e','f','f#','g','g#');
for i = 1 : length(audioFIles)
   audio = audioread(strcat(pathToAudio, audioFIles(i).name));
   gt = textread(strcat(pathToGT, gtFiles(i).name));
   key_estimate_tune = myKeyDetection(audio, blockSize, hopSize, 44100, true);
   
   key_estimate_untune = myKeyDetection(audio, blockSize, hopSize, 44100, false);
   if gt > 0
       if (gt + 1) > 12
           gt_char = strcat(minor(gt-11,:),' min');
       else
%            disp(gt);
           gt_char = strcat(major(gt+1,:),'Maj');
       end

       if strcmp(gt_char, key_estimate_tune)
           numCorrectTrue = numCorrectTrue + 1;
       end
       if strcmp(gt_char, key_estimate_untune)
           numCorrectFalse = numCorrectFalse + 1;
       end
   end
end
accuracy = [numCorrectTrue/length(audioFIles);numCorrectFalse/length(audioFIles)];

end